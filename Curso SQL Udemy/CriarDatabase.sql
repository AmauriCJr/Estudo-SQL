/* MODELAGEM FÍSICA DO BANCO DE DADOS CLIENTE */

CREATE DATABASE PROJETO;

/* CONECTANDO-SE AO BANCO*/

USE PROJETO;

/* CRIANDO A TABELA DE CLIENTES*/

CREATE TABLE CLIENTES (
	NOME VARCHAR(30),
	SEXO CHAR(1),
	EMAIL VARCHAR(30),
	CPF INT(11),
	TELEFONE VARCHAR(30),
	ENDEREÇO VARCHAR(100)

);

/* VERIFICANDO AS TABELAS DO CAMPO*/

SHOW TABLES; /* COMANDO SÓ EXISTE NO MYSQL*/

/* DESCOBRINDO COMO É A ESTRUTURA DE UMA TABELA */

DESC CLIENTES;

/* FORMAR DE INSERIR DADOS */

/* FORMA 1 */

INSERT INTO CLIENTES VALUES('JOAO','M','JOAO@GMAIL.COM',988638273,'22923110','MAIA LACERDA - ESTACIO - RIO DE JANEIRO - RJ');

INSERT INTO CLIENTES VALUES('CELIA','F','CELIA@GMAIL.COM',541521456,'25078869','RIACHUELO - CENTRO - RIO DE JANEIRO - RJ');

INSERT INTO CLIENTES VALUES('JORGE','M',NULL,885755896,'58748895','OSCAR CURY - BOM RETIRO - PATOS DE MINAS - MG');

/* FORMA 2*/

INSERT INTO CLIENTES(NOME,SEXO,ENDEREÇO,TELEFONE,CPF) VALUES('LILIAN','F','SENADOR SOARES - TIJUCA - RIO DE JANEIRO - RJ','947785696',887774856);

/* FORMA 03 - SOMENTE MYSQL */

INSERT INTO CLIENTES VALUES('ANA','F','ANA@GLOBO.COM',85548962,'548556985','PRES ANTONIO CARLOS - CENTRO - SAO PAULO - SP'),
                          ('CARLA','F','CARLA@TERATI.COM.BR',7745828,'66587458','SAMUEL SILVA - CENTRO - BELO HORIZONTE - MG');
						  


/*SELEÇÃO PROJEÇÃO E JUNÇÃO */

/* PROJEÇÃO DE DADOS EM FORMA DE TABELA*/

SELECT NOW() AS DATA_HORA;

SELECT NOW() AS DATA_HORA, 'AMAURI' AS NOME;


SELECT NOME, SEXO, EMAIL FROM CLIENTES;

SELECT NOME AS CLIENTES, SEXO, EMAIL FROM CLIENTES;

SELECT NOME AS CLIENTES, SEXO, EMAIL, NOW() AS DATA_HORA FROM CLIENTES;

/* SELEÇÃO */

SELECT * FROM CLIENTES;

SELECT NOME, SEXO FROM CLIENTES
WHERE SEXO = 'M';

SELECT NOME, ENDEREÇO FROM CLIENTES
WHERE SEXO = 'F';

/* CARACTER CORINGA - %*/

SELECT NOME, SEXO FROM CLIENTES
WHERE ENDEREÇO LIKE '%RJ';

/* CONTA TODAS AS ESNTRADAS DO DATABASE */
SELECT COUNT(*) AS "QUANTIDADE DE REGISTROS" FROM CLIENTES;

/* CONTA AS OCORRÊNCIAS DE CADA TIPO EM UM DETERMINADA COLUNA*/
SELECT SEXO, COUNT(*) FROM CLIENTES
GROUP BY SEXO;

/*FILTRANDO VALORES NULOS */

SELECT NOME, SEXO, ENDEREÇO FROM CLIENTES
WHERE EMAIL IS NULL;

SELECT NOME, SEXO, ENDEREÇO FROM CLIENTES
WHERE EMAIL IS NOT NULL;

/* UPDATE DEVE SER USADO EM CONJUNTO COM O WHERE*/

SELECT NOME, EMAIL FROM CLIENTES
WHERE NOME = 'LILIAN';

UPDATE CLIENTES
SET EMAIL = 'lilian@hotmail.com'
WHERE NOME = 'LILIAN';

/* DELETE DEVE SER USADO COM O WHERE */

SELECT COUNT(*) AS "QUANTIDADE DE REGISTROS" FROM CLIENTES;

SELECT FROM CLIENTES -- CHECA ANTES
WHERE NOME = 'CARLA';

DELETE FROM CLIENTES -- DEPOIS APAGA
WHERE NOME = 'CARLA';

/* APAGA TABELA*/

DROP TABLE CLIENTES;

/*  SELEÇÃO, PROJEÇÃO E JUNÇÃO */

/* SELEÇÃO - TRAZER UM SUBCONJUNTO DE UM CONJUNTO TOTAL, EXTRAIR UMA TABELA DE DADOS DE UMA TABELA MAIOR
A CLAUSULA DE SELEÇÃO É O WHERE
*/

SELECT NOME, SEXO, ENDEREÇO /* PROJEÇÃO*/
FROM CLIENTES /* ORIGEM*/
WHERE EMAIL IS NULL; /* SELEÇÃO*/

/* JUNÇÃO - JOIN */

/* JUNTA DUAS TABELAS QUE POSSUEM CHAVE PRIMÁRIA E CHAVE ESTRANGEIRA EM COMUM */

/* ESSA FORMA ABAIXO NÃO É RECOMENDADA PARA FAZER JUNÇÃO POIS REALIZA OPERAÇÕES 
NÃO NECESSÁRIAS QUE PODEM APRESENTAR LENTIDÃO EM BANCOS GRANDES*/
SELECT NOME, SEXO, BAIRRO, CIDADE 
FROM CLIENTE, ENDERECO
WHERE IDCLIENTE = ID_CLIENTE;


/* A FORMA RECOMENDADA É A UTILIZANDO JOIN ABAIXO */
SELECT NOME, SEXO, BAIRRO, CIDADE /* PROJEÇÃO*/
FROM CLIENTE /* ORIGEM*/
INNER JOIN ENDERECO /* JUNÇÃO*/
ON IDCLIENTE = ID_CLIENTE
WHERE SEXO = 'F';/* SELEÇÃO*/


/* JOIN DUPLO */
SELECT CLIENTE.NOME, CLIENTE.SEXO, ENDERECO.BAIRRO, ENDERECO.CIDADE, TELEFONE.TIPO, TELEFONE.NUMERO
FROM CLIENTE
INNER JOIN ENDERECO
ON CLIENTE.IDCLIENTE = ENDERECO.ID_CLIENTE
INNER JOIN TELEFONE
ON CLIENTE.IDCLIENTE = TELEFONE.ID_CLIENTE;

/* COM PONTEIRAMENTO 
COLOCAR COMO PRINCIPAL A TABELA QUE LIGA AS OUTRAS
*/

SELECT C.NOME, C.SEXO, E.BAIRRO, E.CIDADE, T.TIPO, T.NUMERO
FROM CLIENTE C
INNER JOIN ENDERECO E
ON C.IDCLIENTE = E.ID_CLIENTE
INNER JOIN TELEFONE T
ON C.IDCLIENTE = T.ID_CLIENTE;


/* ALTER TABLE - ALTERAR NOME DA COLUNA*/

/* MUDA O NOME E O TIPO */
ALTER TABLE CLIENTES
CHANGE NOME NOMES VARCHAR(30);

/* MODIFY */
ALTER TABLE CLIENTES
MODIFY NOME VARCHAR(50) NOT NULL;

/* ADICIONAR COLUNAS */

ALTER TABLE CLIENTES
ADD TIPO CHAR(1);

/* APAGANDO UMA COLUNA */

ALTER TABLE CLIENTES
DROP COLUMN TIPO;

/* ADICIONANDO COLUNA EM ORDEM ESPECIFICA */
ALTER TABLE CLIENTES
ADD COLUMN TIPO CHAR(1)
AFTER NOME;

ALTER TABLE CLIENTES
ADD COLUMN TIPO CHAR(1)
FIRST;
